# AI Audio Generator (Gemini 2.5 Pro TTS)

**「テキストデータを用意するだけで、プロレベルのAI音声オーディオブックを。」**

このツールは、Googleの最新AIモデル「Gemini 2.5 Pro」を使用し、書籍や長文のテキストデータを、驚くほど自然で表現力豊かな音声（MP3）に自動変換するシステムです。

---

## 🌟 主な特徴

### 1. 圧倒的に自然な音声品質
従来の機械音声とは一線を画す、人間のような抑揚と感情表現が可能な「Gemini 2.5 Pro Preview TTS」を採用しています。
- **感情表現**: 「親しみやすく」「悲しげに」「ニュースキャスターのように」といった指示が可能です。
- **話者バリエーション**: 日本語推奨話者（Kore, Charonなど）を含む30種類以上の声色から選択できます。

### 2. 本1冊を丸ごと自動変換
数万〜数十万文字に及ぶ長編小説やビジネス書も、一度コマンドを実行するだけで最後まで自動で音声化します。
- **自動分割**: 長文を適切な長さに自動で区切り、API制限を回避します。
- **自動結合**: 分割して生成された音声を、章ごとに1つのMP3ファイルに自動で結合します。

### 3. コストパフォーマンス
プロのナレーターに依頼する場合と比較して、圧倒的な低コストで制作可能です。
- **目安**: 文庫本1冊（約15万文字）で **約1,500円〜2,000円** 程度
  （※Google Cloudの料金体系に準拠します）

---

## 🚀 使い方（3ステップ）

### Step 1: テキストの準備
音声化したい書籍のテキストデータ（`.txt`）を用意し、以下のフォルダに配置します。
```text
books/
  └── 書籍タイトル/
       └── raw/
            └── story.txt  <-- ここに置く
```
※ `utils/import_text.py` を使って簡単に取り込むことも可能です。

### Step 2: 変換の実行
ターミナルで以下のコマンドを実行します。
```bash
# 基本的な使い方（デフォルト設定）
python3 batch_generator.py books/書籍タイトル
```

実行すると、事前に**文字数**と**概算リクエスト数**が表示され、実行の確認を求められます。

### Step 3: 完成
処理が完了すると、以下の場所にMP3ファイルが生成されます。
```text
books/
  └── 書籍タイトル/
       └── audio/
            └── story_combined.mp3  <-- 完成データ！
```

---

## ⚙️ 高度な設定（オプション）

コマンド実行時に、より詳細な指示を与えることができます。

| オプション | 説明 | 例 |
| :--- | :--- | :--- |
| `--speaker` | 話者の変更 | `--speaker Charon` (男性的な声など) |
| `--prompt` | 演技指導（プロンプト） | `--prompt "落ち着いたトーンで、怪談のように話してください"` |
| `--dry-run` | 音声を作らず見積もりのみ | `--dry-run` (文字数と分割数の確認用) |

**実行例:**
```bash
python3 batch_generator.py books/novel \
  --speaker Charon \
  --prompt "緊迫感を持って、ドラマチックに読み上げてください"
```

---

## 📦 必要環境

- Python 3.9以上
- Google Cloud Platform (GCP) アカウント
  - Vertex AI API の有効化
- ffmpeg（音声結合用）
  - macOS: `brew install ffmpeg`

## 📝 開発者向け情報

### ディレクトリ構成
```text
.
├── main.py              # 短文テスト用スクリプト
├── batch_generator.py   # 長文一括変換スクリプト
├── utils/
│   ├── text_splitter.py # テキスト分割ロジック
│   └── audio_merger.py  # 音声結合ロジック
└── books/               # データ格納ディレクトリ
```

### インストール
```bash
pip install -r requirements.txt
```
